/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CoalescePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/SettingsManager.ts
var DEFAULT_SETTINGS = {
  mySetting: "default",
  sortDescending: true,
  blocksCollapsed: true,
  showInDailyNotes: false,
  blockBoundaryStrategy: "default",
  theme: "default",
  showFullPathTitle: false
};
var SettingsManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.plugin.loadData());
  }
  async saveSettings() {
    await this.plugin.saveData(this.settings);
  }
};

// src/CoalesceManager.ts
var import_obsidian3 = require("obsidian");

// src/CoalesceView.ts
var import_obsidian2 = require("obsidian");

// src/BlockComponent.ts
var import_obsidian = require("obsidian");

// src/Logger.ts
var _Logger = class {
  static enable() {
    _Logger.enabled = true;
  }
  static disable() {
    _Logger.enabled = false;
  }
  info(message, ...optionalParams) {
    if (_Logger.enabled) {
      console.log(message, ...optionalParams);
    }
  }
  warn(message, ...optionalParams) {
    if (_Logger.enabled) {
      console.warn(message, ...optionalParams);
    }
  }
  debug(message, ...optionalParams) {
    if (_Logger.enabled) {
      console.debug(message, ...optionalParams);
    }
  }
};
var Logger = _Logger;
Logger.enabled = false;

// src/BlockComponent.ts
var BlockComponent = class {
  constructor(contents, filePath, noteName, showFullPathTitle) {
    this.contents = contents;
    this.filePath = filePath;
    this.noteName = noteName;
    this.showFullPathTitle = showFullPathTitle;
    this.logger = new Logger();
  }
  async render(container, view, onLinkClick) {
    const displayText = this.filePath.replace(/\.md$/, "");
    this.mainContainer = container.createDiv({ cls: "backlink-item" });
    this.headerContainer = this.mainContainer.createDiv({ cls: "block-header" });
    this.toggleButton = this.headerContainer.createEl("span", {
      cls: "toggle-arrow",
      text: "\u25BC"
    });
    const blockTitle = this.headerContainer.createEl("a", {
      text: this.getDisplayTitle(this.filePath, this.showFullPathTitle),
      cls: "block-title",
      href: "#"
    });
    blockTitle.addEventListener("click", (event) => {
      event.preventDefault();
      onLinkClick(this.filePath);
    });
    const contentPreview = this.mainContainer.createDiv("content-preview");
    await import_obsidian.MarkdownRenderer.render(
      view.app,
      this.contents,
      contentPreview,
      this.filePath,
      view
    );
    contentPreview.querySelectorAll("a.internal-link").forEach((link) => {
      link.addEventListener("click", (event) => {
        this.logger.info("Link clicked!");
        event.preventDefault();
        const href = link.getAttribute("href");
        if (href) {
          const decodedPath = decodeURI(href);
          const fullPath = decodedPath.endsWith(".canvas") ? decodedPath : decodedPath.endsWith(".md") ? decodedPath : `${decodedPath}.md`;
          onLinkClick(fullPath);
        }
      });
    });
    contentPreview.style.display = "block";
    this.toggleButton.addEventListener("click", () => {
      const isCollapsed = contentPreview.style.display === "none";
      contentPreview.style.display = isCollapsed ? "block" : "none";
      this.toggleButton.textContent = isCollapsed ? "\u25BC" : "\u25B6";
    });
  }
  getContainer() {
    return this.mainContainer;
  }
  setArrowState(isExpanded) {
    if (this.toggleButton) {
      this.toggleButton.textContent = isExpanded ? "\u25BC" : "\u25B6";
    }
  }
  getDisplayTitle(filePath, showFullPath) {
    if (showFullPath) {
      return filePath.replace(/\.md$/, "");
    } else {
      const parts = filePath.split("/");
      return parts[parts.length - 1].replace(/\.md$/, "");
    }
  }
  updateTitleDisplay(showFullPath) {
    var _a;
    const titleElement = (_a = this.headerContainer) == null ? void 0 : _a.querySelector(".block-title");
    if (titleElement) {
      titleElement.textContent = this.getDisplayTitle(this.filePath, showFullPath);
    }
  }
  getFileName(path) {
    var _a;
    return ((_a = path.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || path;
  }
};

// src/HeaderComponent.ts
var HeaderComponent = class {
  createHeader(container, fileCount, blockCount, sortDescending, onSortToggle, onCollapseToggle, isCollapsed, currentStrategy, onStrategyChange, currentTheme, onThemeChange, showFullPathTitle, onFullPathTitleChange) {
    const header = document.createElement("div");
    header.classList.add("backlinks-header");
    const leftContainer = document.createElement("div");
    leftContainer.classList.add("backlinks-header-left");
    const rightContainer = document.createElement("div");
    rightContainer.classList.add("backlinks-header-right");
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 100 100");
    svg.setAttribute("width", "18");
    svg.setAttribute("height", "18");
    svg.setAttribute("fill", "currentColor");
    svg.innerHTML = `<path d="M85 40.5C85 22.5 70.5 10 52.5 10c-27.6 0-43.1 24.5-43.1 40 0 21.7 16.8 40 42.6 40 11.3 0 21.1-2.8 27.4-6.5 2.2-1.3 3.6-2.8 3.6-4.4 0-1.3-0.9-2.4-2.2-2.4-0.6 0-1.2 0.2-2 0.7-6.8 4.8-15.9 7.1-26.8 7.1-22.3 0-36.2-15.4-36.2-34.5 0-19.1 13.9-34.5 36.2-34.5 15.4 0 27.5 10.3 27.5 24.5 0 11.8-7.8 19.5-16.8 19.5-4.9 0-7.8-2.5-7.8-6.7 0-1.1 0.2-2.3 0.5-3.4l4.1-16.8c0.9-3.7-1.1-5.6-4-5.6-4.9 0-9.6 5-9.6 12.3 0 5.6 3.1 9.5 9.3 9.5 4.7 0 9.1-1.9 12.4-5.4 3.3 3.5 8.2 5.4 14.3 5.4C73.2 60 85 51.5 85 40.5z"/>`;
    leftContainer.appendChild(svg);
    const title = document.createElement("span");
    title.classList.add("header-title");
    title.textContent = `${fileCount} ${fileCount === 1 ? "Backlink" : "Backlinks"}, ${blockCount} ${blockCount === 1 ? "Block" : "Blocks"}`;
    leftContainer.appendChild(title);
    const sortButton = document.createElement("button");
    sortButton.classList.add("clickable-icon", "sort-button");
    sortButton.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 16 16" style="transform: ${sortDescending ? "none" : "rotate(180deg)"}">
                <path fill="currentColor" d="M4 4l4 4 4-4H4z"/>
            </svg>
        `;
    sortButton.addEventListener("click", onSortToggle);
    leftContainer.appendChild(sortButton);
    const collapseButton = document.createElement("button");
    collapseButton.classList.add("clickable-icon", "collapse-button");
    collapseButton.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 16 16" style="transform: ${isCollapsed ? "rotate(-90deg)" : "none"}">
                <path fill="currentColor" d="M4 4l4 4 4-4H4z"/>
            </svg>
        `;
    collapseButton.addEventListener("click", onCollapseToggle);
    leftContainer.appendChild(collapseButton);
    const blockBoundaryStrategySelect = document.createElement("select");
    blockBoundaryStrategySelect.classList.add("strategy-select");
    const blockBoundaryStrategies = ["default", "single-line"];
    blockBoundaryStrategies.forEach((strategy) => {
      const option = document.createElement("option");
      option.value = strategy;
      option.textContent = strategy.replace("-", " ").toUpperCase();
      option.selected = strategy === currentStrategy;
      blockBoundaryStrategySelect.appendChild(option);
    });
    blockBoundaryStrategySelect.addEventListener("change", () => {
      onStrategyChange(blockBoundaryStrategySelect.value);
    });
    leftContainer.appendChild(blockBoundaryStrategySelect);
    const themeSelect = document.createElement("select");
    themeSelect.classList.add("theme-select");
    const themes = ["default", "minimal", "modern"];
    themes.forEach((theme) => {
      const option = document.createElement("option");
      option.value = theme;
      option.textContent = theme.charAt(0).toUpperCase() + theme.slice(1);
      option.selected = theme === currentTheme;
      themeSelect.appendChild(option);
    });
    themeSelect.addEventListener("change", () => {
      onThemeChange(themeSelect.value);
    });
    leftContainer.appendChild(themeSelect);
    const settingsButton = document.createElement("button");
    settingsButton.className = "settings-button";
    settingsButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="1"></circle>
                <circle cx="12" cy="5" r="1"></circle>
                <circle cx="12" cy="19" r="1"></circle>
            </svg>
        `;
    let popup = null;
    let currentFullPathState = showFullPathTitle;
    settingsButton.addEventListener("click", (e) => {
      e.stopPropagation();
      if (popup) {
        popup.remove();
        popup = null;
        return;
      }
      popup = document.createElement("div");
      popup.className = "settings-popup";
      const settingItem = document.createElement("div");
      settingItem.className = "settings-item";
      const leftIcon = document.createElement("div");
      leftIcon.className = "setting-item-icon";
      leftIcon.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 3h18v18H3z"></path>
                    <path d="M3 9h18"></path>
                </svg>
            `;
      const label = document.createElement("span");
      label.textContent = "Full path note title";
      label.className = "setting-item-label";
      const checkmarkContainer = document.createElement("div");
      checkmarkContainer.className = "checkmark-container";
      const checkmark = document.createElement("div");
      checkmark.className = "checkmark";
      checkmark.innerHTML = `
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
            `;
      checkmark.style.display = currentFullPathState ? "block" : "none";
      checkmarkContainer.appendChild(checkmark);
      settingItem.appendChild(leftIcon);
      settingItem.appendChild(label);
      settingItem.appendChild(checkmarkContainer);
      popup.appendChild(settingItem);
      settingItem.addEventListener("click", () => {
        currentFullPathState = !currentFullPathState;
        checkmark.style.display = currentFullPathState ? "block" : "none";
        onFullPathTitleChange(currentFullPathState);
      });
      const rect = settingsButton.getBoundingClientRect();
      popup.style.top = `${rect.bottom + 5}px`;
      popup.style.left = `${rect.left}px`;
      document.body.appendChild(popup);
      const closePopup = (e2) => {
        if (popup && !popup.contains(e2.target) && e2.target !== settingsButton) {
          popup.remove();
          popup = null;
          document.removeEventListener("click", closePopup);
        }
      };
      document.addEventListener("click", closePopup);
    });
    leftContainer.appendChild(svg);
    leftContainer.appendChild(title);
    leftContainer.appendChild(sortButton);
    leftContainer.appendChild(collapseButton);
    leftContainer.appendChild(blockBoundaryStrategySelect);
    leftContainer.appendChild(themeSelect);
    rightContainer.appendChild(settingsButton);
    header.appendChild(leftContainer);
    header.appendChild(rightContainer);
    return header;
  }
};

// src/DefaultBlockBoundaryStrategy.ts
var DefaultBlockBoundaryStrategy = class {
  findBlockBoundaries(content, currentNoteName) {
    const boundaries = [];
    const regex = new RegExp(`\\[\\[${currentNoteName}\\]\\]`, "g");
    let match;
    while ((match = regex.exec(content)) !== null) {
      const lineStartIndex = content.lastIndexOf("\n", match.index) + 1;
      const endIndex = content.indexOf("---", match.index);
      const nextMentionIndex = content.indexOf(`[[${currentNoteName}]]`, match.index + 1);
      let blockEndIndex = content.length;
      if (endIndex !== -1 && (nextMentionIndex === -1 || endIndex < nextMentionIndex)) {
        blockEndIndex = endIndex;
      } else if (nextMentionIndex !== -1) {
        blockEndIndex = nextMentionIndex;
      }
      boundaries.push({ start: lineStartIndex, end: blockEndIndex });
    }
    return boundaries;
  }
};

// src/SingleLineBlockBoundaryStrategy.ts
var SingleLineBlockBoundaryStrategy = class {
  findBlockBoundaries(content, currentNoteName) {
    const boundaries = [];
    const lines = content.split("\n");
    if (lines.length > 0) {
      const firstLine = lines[0];
      boundaries.push({ start: 0, end: firstLine.length });
    }
    return boundaries;
  }
};

// src/CoalesceView.ts
var CoalesceView = class {
  constructor(view, currentNoteName, settingsManager, blockBoundaryStrategy) {
    this.view = view;
    this.settingsManager = settingsManager;
    this.logger = new Logger();
    this.headerComponent = new HeaderComponent();
    this.allBlocks = [];
    this.currentNoteName = currentNoteName;
    this.blockBoundaryStrategy = blockBoundaryStrategy;
    this.sortDescending = this.settingsManager.settings.sortDescending;
    this.blocksCollapsed = this.settingsManager.settings.blocksCollapsed;
    this.container = this.createBacklinksContainer();
    this.logger.info("Appending backlinks container to the view");
    this.currentTheme = this.settingsManager.settings.theme;
    this.applyTheme(this.currentTheme);
    const markdownContent = this.view.containerEl.querySelector(".markdown-preview-view") || this.view.contentEl;
    if (markdownContent) {
      markdownContent.classList.add("markdown-content");
      markdownContent.appendChild(this.container);
    } else {
      this.logger.warn("Markdown content area not found.");
    }
  }
  createBacklinksContainer() {
    const container = document.createElement("div");
    container.classList.add("custom-backlinks-container");
    return container;
  }
  async getBlockData(filePath, currentNoteName) {
    const blocks = [];
    try {
      const file = this.view.app.vault.getAbstractFileByPath(filePath);
      if (file && file instanceof import_obsidian2.TFile) {
        const content = await this.view.app.vault.read(file);
        const boundaries = this.blockBoundaryStrategy.findBlockBoundaries(content, currentNoteName);
        for (const { start, end } of boundaries) {
          const blockContent = content.substring(start, end);
          const block = new BlockComponent(blockContent, filePath, currentNoteName, this.settingsManager.settings.showFullPathTitle);
          blocks.push(block);
        }
      }
    } catch (error) {
      console.error(`Error reading file content for ${filePath}:`, error);
    }
    return blocks;
  }
  updateBlockBoundaryStrategy(strategy) {
    switch (strategy) {
      case "single-line":
        this.blockBoundaryStrategy = new SingleLineBlockBoundaryStrategy();
        break;
      case "default":
      default:
        this.blockBoundaryStrategy = new DefaultBlockBoundaryStrategy();
        break;
    }
  }
  applyTheme(theme) {
    const themes = ["default", "minimal", "modern"];
    themes.forEach((t) => {
      this.container.classList.remove(`theme-${t}`);
    });
    this.container.classList.add(`theme-${theme}`);
  }
  async handleThemeChange(theme) {
    this.currentTheme = theme;
    this.settingsManager.settings.theme = theme;
    await this.settingsManager.saveSettings();
    this.applyTheme(theme);
  }
  async updateBlockTitles(show) {
    this.allBlocks.forEach(({ block }) => {
      block.updateTitleDisplay(show);
    });
  }
  async updateBacklinks(filesLinkingToThis, onLinkClick) {
    this.logger.info("Updating backlinks:", filesLinkingToThis);
    this.container.empty();
    const linksContainer = this.container.createDiv("backlinks-list");
    this.logger.info("Links container:", linksContainer);
    this.allBlocks = [];
    for (const sourcePath of filesLinkingToThis) {
      const blocks = await this.getBlockData(sourcePath, this.currentNoteName);
      blocks.forEach((block) => {
        this.allBlocks.push({ block, sourcePath });
      });
    }
    this.allBlocks.sort((a, b) => this.sortDescending ? b.sourcePath.localeCompare(a.sourcePath) : a.sourcePath.localeCompare(b.sourcePath));
    for (const { block } of this.allBlocks) {
      await block.render(linksContainer, this.view, onLinkClick);
      const blockContainer = block.getContainer();
      const contentPreview = blockContainer.querySelector(".content-preview");
      if (contentPreview) {
        contentPreview.style.display = this.blocksCollapsed ? "none" : "block";
      }
      block.setArrowState(!this.blocksCollapsed);
    }
    const createHeader = () => {
      return this.headerComponent.createHeader(
        this.container,
        filesLinkingToThis.length,
        this.allBlocks.length,
        this.sortDescending,
        () => {
          this.toggleSort();
          this.updateBacklinks(filesLinkingToThis, onLinkClick);
        },
        () => {
          this.toggleAllBlocks();
          const oldHeader = this.container.querySelector(".backlinks-header");
          if (oldHeader && this.container.contains(oldHeader)) {
            const newHeader = createHeader();
            this.container.replaceChild(newHeader, oldHeader);
          }
        },
        this.blocksCollapsed,
        this.settingsManager.settings.blockBoundaryStrategy,
        async (strategy) => {
          this.settingsManager.settings.blockBoundaryStrategy = strategy;
          await this.settingsManager.saveSettings();
          this.updateBlockBoundaryStrategy(strategy);
          await this.updateBacklinks(filesLinkingToThis, onLinkClick);
        },
        this.currentTheme,
        async (theme) => {
          await this.handleThemeChange(theme);
        },
        this.settingsManager.settings.showFullPathTitle,
        async (show) => {
          this.settingsManager.settings.showFullPathTitle = show;
          await this.settingsManager.saveSettings();
          await this.updateBlockTitles(show);
        }
      );
    };
    const header = createHeader();
    this.container.appendChild(header);
    this.container.appendChild(linksContainer);
  }
  toggleSort() {
    this.sortDescending = !this.sortDescending;
    this.settingsManager.settings.sortDescending = this.sortDescending;
    this.settingsManager.saveSettings();
  }
  toggleAllBlocks() {
    this.blocksCollapsed = !this.blocksCollapsed;
    this.settingsManager.settings.blocksCollapsed = this.blocksCollapsed;
    this.settingsManager.saveSettings();
    this.allBlocks.forEach(({ block }) => {
      const blockContainer = block.getContainer();
      const contentPreview = blockContainer.querySelector(".content-preview");
      if (contentPreview) {
        contentPreview.style.display = this.blocksCollapsed ? "none" : "block";
      }
      block.setArrowState(!this.blocksCollapsed);
    });
  }
  clear() {
    if (this.container.parentElement) {
      this.container.parentElement.removeChild(this.container);
    }
    this.logger.info("Backlinks view cleared");
  }
};

// src/CoalesceManager.ts
var CoalesceManager = class {
  constructor(app, settingsManager) {
    this.app = app;
    this.settingsManager = settingsManager;
    this.coalesceView = null;
    this.logger = new Logger();
  }
  handleFileOpen(file) {
    if (!file)
      return;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian3.MarkdownView);
    if (!view)
      return;
    if (this.coalesceView) {
      this.coalesceView.clear();
    }
    const currentNoteName = file.basename;
    const blockBoundaryStrategy = this.getStrategyFromSettings();
    this.coalesceView = new CoalesceView(view, currentNoteName, this.settingsManager, blockBoundaryStrategy);
    const backlinks = this.app.metadataCache.resolvedLinks;
    const filesLinkingToThis = Object.entries(backlinks).filter(([_, links]) => file.path in links).map(([sourcePath]) => sourcePath);
    this.coalesceView.updateBacklinks(filesLinkingToThis, (path) => {
      this.app.workspace.openLinkText(path, "", false);
    });
  }
  getStrategyFromSettings() {
    const blockBoundaryStrategy = this.settingsManager.settings.blockBoundaryStrategy;
    switch (blockBoundaryStrategy) {
      case "single-line":
        return new SingleLineBlockBoundaryStrategy();
      case "default":
      default:
        return new DefaultBlockBoundaryStrategy();
    }
  }
  clearBacklinks() {
    if (this.coalesceView) {
      this.coalesceView.clear();
    }
  }
};

// src/SettingsTab.ts
var import_obsidian4 = require("obsidian");
var CoalesceSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin, settingsManager) {
    super(app, plugin);
    this.plugin = plugin;
    this.settingsManager = settingsManager;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setName("Show in Daily Notes").setDesc("Enable Coalesce view in daily notes").addToggle((toggle) => toggle.setValue(this.settingsManager.settings.showInDailyNotes).onChange(async (value) => {
      this.settingsManager.settings.showInDailyNotes = value;
      await this.settingsManager.saveSettings();
    }));
  }
};

// main.ts
var CoalescePlugin = class extends import_obsidian5.Plugin {
  async onload() {
    this.logger = new Logger();
    this.settingsManager = new SettingsManager(this);
    await this.settingsManager.loadSettings();
    this.addSettingTab(new CoalesceSettingTab(this.app, this, this.settingsManager));
    this.coalesceManager = new CoalesceManager(this.app, this.settingsManager);
    this.app.workspace.on("file-open", (file) => {
      if (!file)
        return;
      const isDaily = this.isDailyNote(file);
      if (!isDaily || isDaily && this.settingsManager.settings.showInDailyNotes) {
        this.coalesceManager.handleFileOpen(file);
      } else {
        this.coalesceManager.clearBacklinks();
      }
    });
    window.enableLogging = function() {
      Logger.enable();
      console.log("Logging enabled");
    };
    window.disableLogging = function() {
      Logger.disable();
      console.log("Logging disabled");
    };
  }
  onunload() {
    this.coalesceManager.clearBacklinks();
  }
  isDailyNote(file) {
    const dailyNotesPlugin = this.app.internalPlugins.plugins["daily-notes"];
    if (!dailyNotesPlugin || !dailyNotesPlugin.enabled) {
      this.logger.debug("Daily Notes plugin is not enabled.");
      return false;
    }
    const dailyNotesFolder = dailyNotesPlugin.instance.options.folder || "";
    if (!dailyNotesFolder) {
      this.logger.debug("Daily Notes folder not set, using vault root.");
    }
    const dailyNotePattern = /^\d{4}-\d{2}-\d{2}\.md$/;
    if (!file.path.startsWith(dailyNotesFolder)) {
      return false;
    }
    return dailyNotePattern.test(file.name);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvU2V0dGluZ3NNYW5hZ2VyLnRzIiwgInNyYy9Db2FsZXNjZU1hbmFnZXIudHMiLCAic3JjL0NvYWxlc2NlVmlldy50cyIsICJzcmMvQmxvY2tDb21wb25lbnQudHMiLCAic3JjL0xvZ2dlci50cyIsICJzcmMvSGVhZGVyQ29tcG9uZW50LnRzIiwgInNyYy9EZWZhdWx0QmxvY2tCb3VuZGFyeVN0cmF0ZWd5LnRzIiwgInNyYy9TaW5nbGVMaW5lQmxvY2tCb3VuZGFyeVN0cmF0ZWd5LnRzIiwgInNyYy9TZXR0aW5nc1RhYi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9zcmMvU2V0dGluZ3NNYW5hZ2VyJztcbmltcG9ydCB7IENvYWxlc2NlTWFuYWdlciB9IGZyb20gJy4vc3JjL0NvYWxlc2NlTWFuYWdlcic7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3NyYy9Mb2dnZXInO1xuaW1wb3J0IHsgQ29hbGVzY2VTZXR0aW5nVGFiIH0gZnJvbSAnLi9zcmMvU2V0dGluZ3NUYWInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2FsZXNjZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XG5cdHByaXZhdGUgY29hbGVzY2VNYW5hZ2VyOiBDb2FsZXNjZU1hbmFnZXI7XG5cdHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXHRcdHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gbmV3IFNldHRpbmdzTWFuYWdlcih0aGlzKTtcblx0XHRhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQ29hbGVzY2VTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzLCB0aGlzLnNldHRpbmdzTWFuYWdlcikpO1xuXG5cdFx0dGhpcy5jb2FsZXNjZU1hbmFnZXIgPSBuZXcgQ29hbGVzY2VNYW5hZ2VyKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzTWFuYWdlcik7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCAoZmlsZTogVEZpbGUpID0+IHtcblx0XHRcdGlmICghZmlsZSkgcmV0dXJuO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBpc0RhaWx5ID0gdGhpcy5pc0RhaWx5Tm90ZShmaWxlKTtcblx0XHRcdGlmICghaXNEYWlseSB8fCAoaXNEYWlseSAmJiB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXR0aW5ncy5zaG93SW5EYWlseU5vdGVzKSkge1xuXHRcdFx0XHR0aGlzLmNvYWxlc2NlTWFuYWdlci5oYW5kbGVGaWxlT3BlbihmaWxlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuY29hbGVzY2VNYW5hZ2VyLmNsZWFyQmFja2xpbmtzKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvKipcblx0XHQgKiBMb2dnaW5nXG5cdFx0ICogVXNhZ2U6IEluIHRoZSBicm93c2VyIGNvbnNvbGUsIHR5cGUgYGVuYWJsZUxvZ2dpbmcoKWAgdG8gZW5hYmxlIGxvZ2dpbmcuXG5cdFx0ICogVXNhZ2U6IEluIHRoZSBicm93c2VyIGNvbnNvbGUsIHR5cGUgYGRpc2FibGVMb2dnaW5nKClgIHRvIGRpc2FibGUgbG9nZ2luZy5cblx0XHQgKi9cblx0XHRcblx0XHQod2luZG93IGFzIGFueSkuZW5hYmxlTG9nZ2luZyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0TG9nZ2VyLmVuYWJsZSgpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJMb2dnaW5nIGVuYWJsZWRcIik7XG5cdFx0fTtcblx0XHQod2luZG93IGFzIGFueSkuZGlzYWJsZUxvZ2dpbmcgPSBmdW5jdGlvbigpIHtcblx0XHRcdExvZ2dlci5kaXNhYmxlKCk7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkxvZ2dpbmcgZGlzYWJsZWRcIik7XG5cdFx0fTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdHRoaXMuY29hbGVzY2VNYW5hZ2VyLmNsZWFyQmFja2xpbmtzKCk7XG5cdH1cblxuXHRwcml2YXRlIGlzRGFpbHlOb3RlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG5cdFx0Ly8gQWNjZXNzIHRoZSBEYWlseSBOb3RlcyBjb3JlIHBsdWdpblxuXHRcdGNvbnN0IGRhaWx5Tm90ZXNQbHVnaW4gPSAodGhpcy5hcHAgYXMgYW55KS5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1snZGFpbHktbm90ZXMnXTtcblx0XHRpZiAoIWRhaWx5Tm90ZXNQbHVnaW4gfHwgIWRhaWx5Tm90ZXNQbHVnaW4uZW5hYmxlZCkge1xuXHRcdFx0dGhpcy5sb2dnZXIuZGVidWcoJ0RhaWx5IE5vdGVzIHBsdWdpbiBpcyBub3QgZW5hYmxlZC4nKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBSZXRyaWV2ZSB0aGUgZGFpbHkgbm90ZXMgZm9sZGVyIGZyb20gdGhlIHBsdWdpbidzIHNldHRpbmdzXG5cdFx0Y29uc3QgZGFpbHlOb3Rlc0ZvbGRlciA9IGRhaWx5Tm90ZXNQbHVnaW4uaW5zdGFuY2Uub3B0aW9ucy5mb2xkZXIgfHwgJyc7XG5cdFx0aWYgKCFkYWlseU5vdGVzRm9sZGVyKSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5kZWJ1ZyhcIkRhaWx5IE5vdGVzIGZvbGRlciBub3Qgc2V0LCB1c2luZyB2YXVsdCByb290LlwiKTtcblx0XHR9XG5cblx0XHRjb25zdCBkYWlseU5vdGVQYXR0ZXJuID0gL15cXGR7NH0tXFxkezJ9LVxcZHsyfVxcLm1kJC87IC8vIEFkanVzdCB0aGlzIHBhdHRlcm4gaWYgbmVlZGVkXG5cblx0XHQvLyBDaGVjayBpZiB0aGUgZmlsZSBpcyBpbiB0aGUgZGFpbHkgbm90ZXMgZm9sZGVyXG5cdFx0aWYgKCFmaWxlLnBhdGguc3RhcnRzV2l0aChkYWlseU5vdGVzRm9sZGVyKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHRoZSBmaWxlIG5hbWUgbWF0Y2hlcyB0aGUgZGFpbHkgbm90ZSBwYXR0ZXJuXG5cdFx0cmV0dXJuIGRhaWx5Tm90ZVBhdHRlcm4udGVzdChmaWxlLm5hbWUpO1xuXHR9XG59IiwgImludGVyZmFjZSBDb2FsZXNjZVBsdWdpblNldHRpbmdzIHtcbiAgICBteVNldHRpbmc6IHN0cmluZztcbiAgICBzb3J0RGVzY2VuZGluZzogYm9vbGVhbjtcbiAgICBibG9ja3NDb2xsYXBzZWQ6IGJvb2xlYW47XG4gICAgc2hvd0luRGFpbHlOb3RlczogYm9vbGVhbjtcbiAgICBibG9ja0JvdW5kYXJ5U3RyYXRlZ3k6IHN0cmluZztcbiAgICB0aGVtZTogc3RyaW5nO1xuICAgIHNob3dGdWxsUGF0aFRpdGxlOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDb2FsZXNjZVBsdWdpblNldHRpbmdzID0ge1xuICAgIG15U2V0dGluZzogJ2RlZmF1bHQnLFxuICAgIHNvcnREZXNjZW5kaW5nOiB0cnVlLFxuICAgIGJsb2Nrc0NvbGxhcHNlZDogdHJ1ZSxcbiAgICBzaG93SW5EYWlseU5vdGVzOiBmYWxzZSxcbiAgICBibG9ja0JvdW5kYXJ5U3RyYXRlZ3k6ICdkZWZhdWx0JyxcbiAgICB0aGVtZTogJ2RlZmF1bHQnLFxuICAgIHNob3dGdWxsUGF0aFRpdGxlOiBmYWxzZVxufTtcblxuaW50ZXJmYWNlIFBsdWdpbiB7XG4gICAgbG9hZERhdGEoKTogUHJvbWlzZTxQYXJ0aWFsPENvYWxlc2NlUGx1Z2luU2V0dGluZ3M+PjtcbiAgICBzYXZlRGF0YShzZXR0aW5nczogQ29hbGVzY2VQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8dm9pZD47XG59XG5cbmNsYXNzIFBsdWdpbiB7XG4gICAgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTxQYXJ0aWFsPENvYWxlc2NlUGx1Z2luU2V0dGluZ3M+PiB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlRGF0YShzZXR0aW5nczogQ29hbGVzY2VQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBzZXR0aW5nczogQ29hbGVzY2VQbHVnaW5TZXR0aW5ncztcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTWFya2Rvd25WaWV3LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IENvYWxlc2NlVmlldyB9IGZyb20gJy4vQ29hbGVzY2VWaWV3JztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyJztcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vU2V0dGluZ3NNYW5hZ2VyJztcbmltcG9ydCB7IERlZmF1bHRCbG9ja0JvdW5kYXJ5U3RyYXRlZ3kgfSBmcm9tICcuL0RlZmF1bHRCbG9ja0JvdW5kYXJ5U3RyYXRlZ3knO1xuaW1wb3J0IHsgU2luZ2xlTGluZUJsb2NrQm91bmRhcnlTdHJhdGVneSB9IGZyb20gJy4vU2luZ2xlTGluZUJsb2NrQm91bmRhcnlTdHJhdGVneSc7XG5cbmV4cG9ydCBjbGFzcyBDb2FsZXNjZU1hbmFnZXIge1xuICAgIHByaXZhdGUgY29hbGVzY2VWaWV3OiBDb2FsZXNjZVZpZXcgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCwgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcikge31cblxuICAgIGhhbmRsZUZpbGVPcGVuKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIXZpZXcpIHJldHVybjtcblxuICAgICAgICBpZiAodGhpcy5jb2FsZXNjZVZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuY29hbGVzY2VWaWV3LmNsZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXJyZW50Tm90ZU5hbWUgPSBmaWxlLmJhc2VuYW1lO1xuICAgICAgICBjb25zdCBibG9ja0JvdW5kYXJ5U3RyYXRlZ3kgPSB0aGlzLmdldFN0cmF0ZWd5RnJvbVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuY29hbGVzY2VWaWV3ID0gbmV3IENvYWxlc2NlVmlldyh2aWV3LCBjdXJyZW50Tm90ZU5hbWUsIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLCBibG9ja0JvdW5kYXJ5U3RyYXRlZ3kpO1xuXG4gICAgICAgIGNvbnN0IGJhY2tsaW5rcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUucmVzb2x2ZWRMaW5rcztcbiAgICAgICAgY29uc3QgZmlsZXNMaW5raW5nVG9UaGlzID0gT2JqZWN0LmVudHJpZXMoYmFja2xpbmtzKVxuICAgICAgICAgICAgLmZpbHRlcigoW18sIGxpbmtzXSkgPT4gZmlsZS5wYXRoIGluIChsaW5rcyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikpXG4gICAgICAgICAgICAubWFwKChbc291cmNlUGF0aF0pID0+IHNvdXJjZVBhdGgpO1xuXG4gICAgICAgIHRoaXMuY29hbGVzY2VWaWV3LnVwZGF0ZUJhY2tsaW5rcyhmaWxlc0xpbmtpbmdUb1RoaXMsIChwYXRoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHBhdGgsICcnLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U3RyYXRlZ3lGcm9tU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGJsb2NrQm91bmRhcnlTdHJhdGVneSA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLmJsb2NrQm91bmRhcnlTdHJhdGVneTtcbiAgICAgICAgc3dpdGNoIChibG9ja0JvdW5kYXJ5U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNhc2UgJ3NpbmdsZS1saW5lJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNpbmdsZUxpbmVCbG9ja0JvdW5kYXJ5U3RyYXRlZ3koKTtcbiAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHQnOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERlZmF1bHRCbG9ja0JvdW5kYXJ5U3RyYXRlZ3koKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyQmFja2xpbmtzKCkge1xuICAgICAgICBpZiAodGhpcy5jb2FsZXNjZVZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuY29hbGVzY2VWaWV3LmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTWFya2Rvd25WaWV3LCBURmlsZSwgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEJsb2NrQ29tcG9uZW50IH0gZnJvbSAnLi9CbG9ja0NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL0xvZ2dlcic7XG5pbXBvcnQgeyBIZWFkZXJDb21wb25lbnQgfSBmcm9tICcuL0hlYWRlckNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL1NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyBCbG9ja0JvdW5kYXJ5U3RyYXRlZ3kgfSBmcm9tICcuL0Jsb2NrQm91bmRhcnlTdHJhdGVneSc7XG5pbXBvcnQgeyBEZWZhdWx0QmxvY2tCb3VuZGFyeVN0cmF0ZWd5IH0gZnJvbSAnLi9EZWZhdWx0QmxvY2tCb3VuZGFyeVN0cmF0ZWd5JztcbmltcG9ydCB7IFNpbmdsZUxpbmVCbG9ja0JvdW5kYXJ5U3RyYXRlZ3kgfSBmcm9tICcuL1NpbmdsZUxpbmVCbG9ja0JvdW5kYXJ5U3RyYXRlZ3knO1xuXG5leHBvcnQgY2xhc3MgQ29hbGVzY2VWaWV3IHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjdXJyZW50Tm90ZU5hbWU6IHN0cmluZztcbiAgICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuICAgIHByaXZhdGUgaGVhZGVyQ29tcG9uZW50OiBIZWFkZXJDb21wb25lbnQgPSBuZXcgSGVhZGVyQ29tcG9uZW50KCk7XG4gICAgcHJpdmF0ZSBzb3J0RGVzY2VuZGluZzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGJsb2Nrc0NvbGxhcHNlZDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGFsbEJsb2NrczogeyBibG9jazogQmxvY2tDb21wb25lbnQ7IHNvdXJjZVBhdGg6IHN0cmluZyB9W10gPSBbXTtcbiAgICBwcml2YXRlIGJsb2NrQm91bmRhcnlTdHJhdGVneTogQmxvY2tCb3VuZGFyeVN0cmF0ZWd5O1xuICAgIHByaXZhdGUgY3VycmVudFRoZW1lOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSB2aWV3OiBNYXJrZG93blZpZXcsXG4gICAgICAgIGN1cnJlbnROb3RlTmFtZTogc3RyaW5nLFxuICAgICAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLFxuICAgICAgICBibG9ja0JvdW5kYXJ5U3RyYXRlZ3k6IEJsb2NrQm91bmRhcnlTdHJhdGVneSxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm90ZU5hbWUgPSBjdXJyZW50Tm90ZU5hbWU7XG4gICAgICAgIHRoaXMuYmxvY2tCb3VuZGFyeVN0cmF0ZWd5ID0gYmxvY2tCb3VuZGFyeVN0cmF0ZWd5O1xuICAgICAgICB0aGlzLnNvcnREZXNjZW5kaW5nID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0dGluZ3Muc29ydERlc2NlbmRpbmc7XG4gICAgICAgIHRoaXMuYmxvY2tzQ29sbGFwc2VkID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuc2V0dGluZ3MuYmxvY2tzQ29sbGFwc2VkO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuY3JlYXRlQmFja2xpbmtzQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJBcHBlbmRpbmcgYmFja2xpbmtzIGNvbnRhaW5lciB0byB0aGUgdmlld1wiKTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZSA9IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLnRoZW1lO1xuICAgICAgICB0aGlzLmFwcGx5VGhlbWUodGhpcy5jdXJyZW50VGhlbWUpO1xuXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgY29udGFpbmVyIGRpcmVjdGx5IHRvIHRoZSBtYXJrZG93biB2aWV3J3MgY29udGVudCBhcmVhXG4gICAgICAgIGNvbnN0IG1hcmtkb3duQ29udGVudCA9IHRoaXMudmlldy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcubWFya2Rvd24tcHJldmlldy12aWV3JykgYXMgSFRNTEVsZW1lbnQgfHwgdGhpcy52aWV3LmNvbnRlbnRFbCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKG1hcmtkb3duQ29udGVudCkge1xuICAgICAgICAgICAgbWFya2Rvd25Db250ZW50LmNsYXNzTGlzdC5hZGQoJ21hcmtkb3duLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIG1hcmtkb3duQ29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXCJNYXJrZG93biBjb250ZW50IGFyZWEgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQmFja2xpbmtzQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjdXN0b20tYmFja2xpbmtzLWNvbnRhaW5lcicpO1xuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0QmxvY2tEYXRhKGZpbGVQYXRoOiBzdHJpbmcsIGN1cnJlbnROb3RlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxCbG9ja0NvbXBvbmVudFtdPiB7XG4gICAgICAgIGNvbnN0IGJsb2NrczogQmxvY2tDb21wb25lbnRbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnZpZXcuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWxlICYmIGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZpZXcuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm91bmRhcmllcyA9IHRoaXMuYmxvY2tCb3VuZGFyeVN0cmF0ZWd5LmZpbmRCbG9ja0JvdW5kYXJpZXMoY29udGVudCwgY3VycmVudE5vdGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzdGFydCwgZW5kIH0gb2YgYm91bmRhcmllcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja0NvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZyhzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBuZXcgQmxvY2tDb21wb25lbnQoYmxvY2tDb250ZW50LCBmaWxlUGF0aCwgY3VycmVudE5vdGVOYW1lLCB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXR0aW5ncy5zaG93RnVsbFBhdGhUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIGZpbGUgY29udGVudCBmb3IgJHtmaWxlUGF0aH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBibG9ja3M7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVCbG9ja0JvdW5kYXJ5U3RyYXRlZ3koc3RyYXRlZ3k6IHN0cmluZykge1xuICAgICAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICAgICAgICBjYXNlICdzaW5nbGUtbGluZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja0JvdW5kYXJ5U3RyYXRlZ3kgPSBuZXcgU2luZ2xlTGluZUJsb2NrQm91bmRhcnlTdHJhdGVneSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGVmYXVsdCc6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tCb3VuZGFyeVN0cmF0ZWd5ID0gbmV3IERlZmF1bHRCbG9ja0JvdW5kYXJ5U3RyYXRlZ3koKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXBwbHlUaGVtZSh0aGVtZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHRoZW1lcyA9IFsnZGVmYXVsdCcsICdtaW5pbWFsJywgJ21vZGVybiddO1xuICAgICAgICB0aGVtZXMuZm9yRWFjaCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoYHRoZW1lLSR7dH1gKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYHRoZW1lLSR7dGhlbWV9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVUaGVtZUNoYW5nZSh0aGVtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFRoZW1lID0gdGhlbWU7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLnRoZW1lID0gdGhlbWU7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLmFwcGx5VGhlbWUodGhlbWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQmxvY2tUaXRsZXMoc2hvdzogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmFsbEJsb2Nrcy5mb3JFYWNoKCh7IGJsb2NrIH0pID0+IHtcbiAgICAgICAgICAgIGJsb2NrLnVwZGF0ZVRpdGxlRGlzcGxheShzaG93KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZUJhY2tsaW5rcyhmaWxlc0xpbmtpbmdUb1RoaXM6IHN0cmluZ1tdLCBvbkxpbmtDbGljazogKHBhdGg6IHN0cmluZykgPT4gdm9pZCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiVXBkYXRpbmcgYmFja2xpbmtzOlwiLCBmaWxlc0xpbmtpbmdUb1RoaXMpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IGxpbmtzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KCdiYWNrbGlua3MtbGlzdCcpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiTGlua3MgY29udGFpbmVyOlwiLCBsaW5rc0NvbnRhaW5lcik7XG5cbiAgICAgICAgdGhpcy5hbGxCbG9ja3MgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbGxlY3QgYWxsIGJsb2NrcyBmaXJzdFxuICAgICAgICBmb3IgKGNvbnN0IHNvdXJjZVBhdGggb2YgZmlsZXNMaW5raW5nVG9UaGlzKSB7XG4gICAgICAgICAgICBjb25zdCBibG9ja3MgPSBhd2FpdCB0aGlzLmdldEJsb2NrRGF0YShzb3VyY2VQYXRoLCB0aGlzLmN1cnJlbnROb3RlTmFtZSk7XG4gICAgICAgICAgICBibG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxCbG9ja3MucHVzaCh7IGJsb2NrLCBzb3VyY2VQYXRoIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb3J0IGJsb2Nrc1xuICAgICAgICB0aGlzLmFsbEJsb2Nrcy5zb3J0KChhLCBiKSA9PiB0aGlzLnNvcnREZXNjZW5kaW5nIFxuICAgICAgICAgICAgPyBiLnNvdXJjZVBhdGgubG9jYWxlQ29tcGFyZShhLnNvdXJjZVBhdGgpXG4gICAgICAgICAgICA6IGEuc291cmNlUGF0aC5sb2NhbGVDb21wYXJlKGIuc291cmNlUGF0aCkpO1xuXG4gICAgICAgIC8vIFJlbmRlciBibG9ja3Mgd2l0aCBjb3JyZWN0IGluaXRpYWwgc3RhdGVcbiAgICAgICAgZm9yIChjb25zdCB7IGJsb2NrIH0gb2YgdGhpcy5hbGxCbG9ja3MpIHtcbiAgICAgICAgICAgIGF3YWl0IGJsb2NrLnJlbmRlcihsaW5rc0NvbnRhaW5lciwgdGhpcy52aWV3LCBvbkxpbmtDbGljayk7XG4gICAgICAgICAgICBjb25zdCBibG9ja0NvbnRhaW5lciA9IGJsb2NrLmdldENvbnRhaW5lcigpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudFByZXZpZXcgPSBibG9ja0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY29udGVudC1wcmV2aWV3JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoY29udGVudFByZXZpZXcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50UHJldmlldy5zdHlsZS5kaXNwbGF5ID0gdGhpcy5ibG9ja3NDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suc2V0QXJyb3dTdGF0ZSghdGhpcy5ibG9ja3NDb2xsYXBzZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGhlYWRlciBhZnRlciBibG9ja3MgYXJlIHJlbmRlcmVkXG4gICAgICAgIGNvbnN0IGNyZWF0ZUhlYWRlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlckNvbXBvbmVudC5jcmVhdGVIZWFkZXIoXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIsIFxuICAgICAgICAgICAgICAgIGZpbGVzTGlua2luZ1RvVGhpcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxCbG9ja3MubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHRoaXMuc29ydERlc2NlbmRpbmcsXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVNvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCYWNrbGlua3MoZmlsZXNMaW5raW5nVG9UaGlzLCBvbkxpbmtDbGljayk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQWxsQmxvY2tzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEhlYWRlciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYWNrbGlua3MtaGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRIZWFkZXIgJiYgdGhpcy5jb250YWluZXIuY29udGFpbnMob2xkSGVhZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SGVhZGVyID0gY3JlYXRlSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXBsYWNlQ2hpbGQobmV3SGVhZGVyLCBvbGRIZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrc0NvbGxhcHNlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXR0aW5ncy5ibG9ja0JvdW5kYXJ5U3RyYXRlZ3ksXG4gICAgICAgICAgICAgICAgYXN5bmMgKHN0cmF0ZWd5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLmJsb2NrQm91bmRhcnlTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCbG9ja0JvdW5kYXJ5U3RyYXRlZ3koc3RyYXRlZ3kpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUJhY2tsaW5rcyhmaWxlc0xpbmtpbmdUb1RoaXMsIG9uTGlua0NsaWNrKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRoZW1lLFxuICAgICAgICAgICAgICAgIGFzeW5jICh0aGVtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVRoZW1lQ2hhbmdlKHRoZW1lKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLnNob3dGdWxsUGF0aFRpdGxlLFxuICAgICAgICAgICAgICAgIGFzeW5jIChzaG93OiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLnNob3dGdWxsUGF0aFRpdGxlID0gc2hvdztcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQmxvY2tUaXRsZXMoc2hvdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBjcmVhdGVIZWFkZXIoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQobGlua3NDb250YWluZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b2dnbGVTb3J0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNvcnREZXNjZW5kaW5nID0gIXRoaXMuc29ydERlc2NlbmRpbmc7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLnNvcnREZXNjZW5kaW5nID0gdGhpcy5zb3J0RGVzY2VuZGluZztcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b2dnbGVBbGxCbG9ja3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYmxvY2tzQ29sbGFwc2VkID0gIXRoaXMuYmxvY2tzQ29sbGFwc2VkO1xuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlci5zZXR0aW5ncy5ibG9ja3NDb2xsYXBzZWQgPSB0aGlzLmJsb2Nrc0NvbGxhcHNlZDtcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGFsbCBibG9ja3MgYmFzZWQgb24gdGhlIG5ldyBzdGF0ZVxuICAgICAgICB0aGlzLmFsbEJsb2Nrcy5mb3JFYWNoKCh7IGJsb2NrIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrQ29udGFpbmVyID0gYmxvY2suZ2V0Q29udGFpbmVyKCk7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50UHJldmlldyA9IGJsb2NrQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50LXByZXZpZXcnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChjb250ZW50UHJldmlldykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRQcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSB0aGlzLmJsb2Nrc0NvbGxhcHNlZCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5zZXRBcnJvd1N0YXRlKCF0aGlzLmJsb2Nrc0NvbGxhcHNlZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGNvbnRhaW5lciBmcm9tIHRoZSBET00gdG90YWxseVxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkJhY2tsaW5rcyB2aWV3IGNsZWFyZWRcIik7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IE1hcmtkb3duUmVuZGVyZXIsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyJztcblxuZXhwb3J0IGNsYXNzIEJsb2NrQ29tcG9uZW50IHtcbiAgICBwcml2YXRlIG1haW5Db250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaGVhZGVyQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgY29udGVudHM6IHN0cmluZyxcbiAgICAgICAgcHVibGljIGZpbGVQYXRoOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBub3RlTmFtZTogc3RyaW5nLFxuICAgICAgICBwcml2YXRlIHNob3dGdWxsUGF0aFRpdGxlOiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuICAgIH1cblxuICAgIGFzeW5jIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50LCB2aWV3OiBNYXJrZG93blZpZXcsIG9uTGlua0NsaWNrOiAocGF0aDogc3RyaW5nKSA9PiB2b2lkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gdGhpcy5maWxlUGF0aC5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIG1haW4gY29udGFpbmVyXG4gICAgICAgIHRoaXMubWFpbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdiYWNrbGluay1pdGVtJyB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgaGVhZGVyIGNvbnRhaW5lclxuICAgICAgICB0aGlzLmhlYWRlckNvbnRhaW5lciA9IHRoaXMubWFpbkNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdibG9jay1oZWFkZXInIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IHRoaXMuaGVhZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgY2xzOiAndG9nZ2xlLWFycm93JyxcbiAgICAgICAgICAgIHRleHQ6ICdcdTI1QkMnLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCbG9jayBoZWFkZXJcbiAgICAgICAgY29uc3QgYmxvY2tUaXRsZSA9IHRoaXMuaGVhZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5nZXREaXNwbGF5VGl0bGUodGhpcy5maWxlUGF0aCwgdGhpcy5zaG93RnVsbFBhdGhUaXRsZSksXG4gICAgICAgICAgICBjbHM6ICdibG9jay10aXRsZScsXG4gICAgICAgICAgICBocmVmOiAnIycsXG4gICAgICAgIH0pO1xuICAgICAgICBibG9ja1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgb25MaW5rQ2xpY2sodGhpcy5maWxlUGF0aCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBjb250ZW50IGNvbnRhaW5lclxuICAgICAgICBjb25zdCBjb250ZW50UHJldmlldyA9IHRoaXMubWFpbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2NvbnRlbnQtcHJldmlldycpO1xuXG4gICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKFxuICAgICAgICAgICAgdmlldy5hcHAsXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRzLFxuICAgICAgICAgICAgY29udGVudFByZXZpZXcsXG4gICAgICAgICAgICB0aGlzLmZpbGVQYXRoLFxuICAgICAgICAgICAgdmlldyxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlcnMgZm9yIGludGVybmFsIGxpbmtzXG4gICAgICAgIGNvbnRlbnRQcmV2aWV3LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuaW50ZXJuYWwtbGluaycpLmZvckVhY2goKGxpbms6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIkxpbmsgY2xpY2tlZCFcIik7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRQYXRoID0gZGVjb2RlVVJJKGhyZWYpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgY2FudmFzIGZpbGUgZmlyc3QsIG90aGVyd2lzZSBoYW5kbGUgYXMgbWFya2Rvd25cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBkZWNvZGVkUGF0aC5lbmRzV2l0aCgnLmNhbnZhcycpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBkZWNvZGVkUGF0aCBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVjb2RlZFBhdGguZW5kc1dpdGgoJy5tZCcpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGVjb2RlZFBhdGggXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgJHtkZWNvZGVkUGF0aH0ubWRgO1xuICAgICAgICAgICAgICAgICAgICBvbkxpbmtDbGljayhmdWxsUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEluaXRpYWxseSBzaG93IHRoZSBlbnRpcmUgYmxvY2sgY29udGFpbmVyXG4gICAgICAgIGNvbnRlbnRQcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgIC8vIFNob3cvaGlkZSBhIHNpbmdsZSBibG9ja1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gY29udGVudFByZXZpZXcuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnO1xuICAgICAgICAgICAgY29udGVudFByZXZpZXcuc3R5bGUuZGlzcGxheSA9IGlzQ29sbGFwc2VkID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnRleHRDb250ZW50ID0gaXNDb2xsYXBzZWQgPyAnXHUyNUJDJyA6ICdcdTI1QjYnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWluQ29udGFpbmVyO1xuICAgIH1cblxuICAgIHNldEFycm93U3RhdGUoaXNFeHBhbmRlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50b2dnbGVCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnRleHRDb250ZW50ID0gaXNFeHBhbmRlZCA/ICdcdTI1QkMnIDogJ1x1MjVCNic7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERpc3BsYXlUaXRsZShmaWxlUGF0aDogc3RyaW5nLCBzaG93RnVsbFBhdGg6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICBpZiAoc2hvd0Z1bGxQYXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsZVBhdGgucmVwbGFjZSgvXFwubWQkLywgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBmaWxlUGF0aC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVUaXRsZURpc3BsYXkoc2hvd0Z1bGxQYXRoOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IHRoaXMuaGVhZGVyQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCcuYmxvY2stdGl0bGUnKSBhcyBIVE1MQW5jaG9yRWxlbWVudDtcbiAgICAgICAgaWYgKHRpdGxlRWxlbWVudCkge1xuICAgICAgICAgICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5nZXREaXNwbGF5VGl0bGUodGhpcy5maWxlUGF0aCwgc2hvd0Z1bGxQYXRoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RmlsZU5hbWUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IHBhdGg7XG4gICAgfVxufVxuIiwgImV4cG9ydCBjbGFzcyBMb2dnZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZW5hYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHN0YXRpYyBlbmFibGUoKSB7XHJcbiAgICAgICAgTG9nZ2VyLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkaXNhYmxlKCkge1xyXG4gICAgICAgIExvZ2dlci5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaW5mbyhtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pIHtcclxuICAgICAgICBpZiAoTG9nZ2VyLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3YXJuKG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSkge1xyXG4gICAgICAgIGlmIChMb2dnZXIuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkZWJ1ZyhtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pIHtcclxuICAgICAgICBpZiAoTG9nZ2VyLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgImV4cG9ydCBjbGFzcyBIZWFkZXJDb21wb25lbnQge1xuICAgIGNyZWF0ZUhlYWRlcihcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgXG4gICAgICAgIGZpbGVDb3VudDogbnVtYmVyLCBcbiAgICAgICAgYmxvY2tDb3VudDogbnVtYmVyLFxuICAgICAgICBzb3J0RGVzY2VuZGluZzogYm9vbGVhbixcbiAgICAgICAgb25Tb3J0VG9nZ2xlOiAoKSA9PiB2b2lkLFxuICAgICAgICBvbkNvbGxhcHNlVG9nZ2xlOiAoKSA9PiB2b2lkLFxuICAgICAgICBpc0NvbGxhcHNlZDogYm9vbGVhbixcbiAgICAgICAgY3VycmVudFN0cmF0ZWd5OiBzdHJpbmcsXG4gICAgICAgIG9uU3RyYXRlZ3lDaGFuZ2U6IChzdHJhdGVneTogc3RyaW5nKSA9PiB2b2lkLFxuICAgICAgICBjdXJyZW50VGhlbWU6IHN0cmluZyxcbiAgICAgICAgb25UaGVtZUNoYW5nZTogKHRoZW1lOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgICAgIHNob3dGdWxsUGF0aFRpdGxlOiBib29sZWFuLFxuICAgICAgICBvbkZ1bGxQYXRoVGl0bGVDaGFuZ2U6IChzaG93OiBib29sZWFuKSA9PiB2b2lkXG4gICAgKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2JhY2tsaW5rcy1oZWFkZXInKTtcblxuICAgICAgICAvLyBDcmVhdGUgbGVmdCBjb250YWluZXJcbiAgICAgICAgY29uc3QgbGVmdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsZWZ0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2JhY2tsaW5rcy1oZWFkZXItbGVmdCcpO1xuXG4gICAgICAgIC8vIENyZWF0ZSByaWdodCBjb250YWluZXJcbiAgICAgICAgY29uc3QgcmlnaHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcmlnaHRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYmFja2xpbmtzLWhlYWRlci1yaWdodCcpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIGNvYWxlc2NlIGljb25cbiAgICAgICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIFwiMCAwIDEwMCAxMDBcIik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjE4XCIpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiMThcIik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwiY3VycmVudENvbG9yXCIpO1xuICAgICAgICBzdmcuaW5uZXJIVE1MID0gYDxwYXRoIGQ9XCJNODUgNDAuNUM4NSAyMi41IDcwLjUgMTAgNTIuNSAxMGMtMjcuNiAwLTQzLjEgMjQuNS00My4xIDQwIDAgMjEuNyAxNi44IDQwIDQyLjYgNDAgMTEuMyAwIDIxLjEtMi44IDI3LjQtNi41IDIuMi0xLjMgMy42LTIuOCAzLjYtNC40IDAtMS4zLTAuOS0yLjQtMi4yLTIuNC0wLjYgMC0xLjIgMC4yLTIgMC43LTYuOCA0LjgtMTUuOSA3LjEtMjYuOCA3LjEtMjIuMyAwLTM2LjItMTUuNC0zNi4yLTM0LjUgMC0xOS4xIDEzLjktMzQuNSAzNi4yLTM0LjUgMTUuNCAwIDI3LjUgMTAuMyAyNy41IDI0LjUgMCAxMS44LTcuOCAxOS41LTE2LjggMTkuNS00LjkgMC03LjgtMi41LTcuOC02LjcgMC0xLjEgMC4yLTIuMyAwLjUtMy40bDQuMS0xNi44YzAuOS0zLjctMS4xLTUuNi00LTUuNi00LjkgMC05LjYgNS05LjYgMTIuMyAwIDUuNiAzLjEgOS41IDkuMyA5LjUgNC43IDAgOS4xLTEuOSAxMi40LTUuNCAzLjMgMy41IDguMiA1LjQgMTQuMyA1LjRDNzMuMiA2MCA4NSA1MS41IDg1IDQwLjV6XCIvPmA7XG4gICAgICAgIGxlZnRDb250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgnaGVhZGVyLXRpdGxlJyk7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gYCR7ZmlsZUNvdW50fSAke2ZpbGVDb3VudCA9PT0gMSA/ICdCYWNrbGluaycgOiAnQmFja2xpbmtzJ30sICR7YmxvY2tDb3VudH0gJHtibG9ja0NvdW50ID09PSAxID8gJ0Jsb2NrJyA6ICdCbG9ja3MnfWA7XG4gICAgICAgIGxlZnRDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbmQgYWRkIHNvcnQgaWNvblxuICAgICAgICBjb25zdCBzb3J0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHNvcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2xpY2thYmxlLWljb24nLCAnc29ydC1idXR0b24nKTtcbiAgICAgICAgc29ydEJ1dHRvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBzdHlsZT1cInRyYW5zZm9ybTogJHtzb3J0RGVzY2VuZGluZyA/ICdub25lJyA6ICdyb3RhdGUoMTgwZGVnKSd9XCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNNCA0bDQgNCA0LTRINHpcIi8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgYDtcbiAgICAgICAgc29ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU29ydFRvZ2dsZSk7XG4gICAgICAgIGxlZnRDb250YWluZXIuYXBwZW5kQ2hpbGQoc29ydEJ1dHRvbik7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBhZGQgY29sbGFwc2UvZXhwYW5kIGFsbCBpY29uXG4gICAgICAgIGNvbnN0IGNvbGxhcHNlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGNvbGxhcHNlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NsaWNrYWJsZS1pY29uJywgJ2NvbGxhcHNlLWJ1dHRvbicpO1xuICAgICAgICBjb2xsYXBzZUJ1dHRvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBzdHlsZT1cInRyYW5zZm9ybTogJHtpc0NvbGxhcHNlZCA/ICdyb3RhdGUoLTkwZGVnKScgOiAnbm9uZSd9XCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNNCA0bDQgNCA0LTRINHpcIi8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgYDtcbiAgICAgICAgY29sbGFwc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNvbGxhcHNlVG9nZ2xlKTtcbiAgICAgICAgbGVmdENvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xsYXBzZUJ1dHRvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYW5kIGFkZCBibG9ja0JvdW5kYXJ5U3RyYXRlZ3lTZWxlY3QgZHJvcGRvd25cbiAgICAgICAgY29uc3QgYmxvY2tCb3VuZGFyeVN0cmF0ZWd5U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgICAgIGJsb2NrQm91bmRhcnlTdHJhdGVneVNlbGVjdC5jbGFzc0xpc3QuYWRkKCdzdHJhdGVneS1zZWxlY3QnKTtcbiAgICAgICAgY29uc3QgYmxvY2tCb3VuZGFyeVN0cmF0ZWdpZXMgPSBbJ2RlZmF1bHQnLCAnc2luZ2xlLWxpbmUnXTtcbiAgICAgICAgYmxvY2tCb3VuZGFyeVN0cmF0ZWdpZXMuZm9yRWFjaChzdHJhdGVneSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHN0cmF0ZWd5O1xuICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gc3RyYXRlZ3kucmVwbGFjZSgnLScsICcgJykudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHN0cmF0ZWd5ID09PSBjdXJyZW50U3RyYXRlZ3k7XG4gICAgICAgICAgICBibG9ja0JvdW5kYXJ5U3RyYXRlZ3lTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrQm91bmRhcnlTdHJhdGVneVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBvblN0cmF0ZWd5Q2hhbmdlKGJsb2NrQm91bmRhcnlTdHJhdGVneVNlbGVjdC52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZWZ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGJsb2NrQm91bmRhcnlTdHJhdGVneVNlbGVjdCk7XG5cbiAgICAgICAgLy8gQWRkIHRoZW1lIHNlbGVjdG9yIGRyb3Bkb3duXG4gICAgICAgIGNvbnN0IHRoZW1lU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgICAgIHRoZW1lU2VsZWN0LmNsYXNzTGlzdC5hZGQoJ3RoZW1lLXNlbGVjdCcpO1xuICAgICAgICBjb25zdCB0aGVtZXMgPSBbJ2RlZmF1bHQnLCAnbWluaW1hbCcsICdtb2Rlcm4nXTtcbiAgICAgICAgdGhlbWVzLmZvckVhY2godGhlbWUgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSB0aGVtZTtcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHRoZW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhlbWUuc2xpY2UoMSk7XG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0aGVtZSA9PT0gY3VycmVudFRoZW1lO1xuICAgICAgICAgICAgdGhlbWVTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoZW1lU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIG9uVGhlbWVDaGFuZ2UodGhlbWVTZWxlY3QudmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGVmdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGVtZVNlbGVjdCk7XG5cbiAgICAgICAgLy8gQWRkIHNldHRpbmdzIGJ1dHRvbiBhZnRlciB0aGUgdGhlbWUgc2VsZWN0b3JcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uY2xhc3NOYW1lID0gJ3NldHRpbmdzLWJ1dHRvbic7XG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjFcIj48L2NpcmNsZT5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjVcIiByPVwiMVwiPjwvY2lyY2xlPlxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTlcIiByPVwiMVwiPjwvY2lyY2xlPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgIGA7XG5cbiAgICAgICAgbGV0IHBvcHVwOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIGxldCBjdXJyZW50RnVsbFBhdGhTdGF0ZSA9IHNob3dGdWxsUGF0aFRpdGxlO1xuXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwb3B1cCkge1xuICAgICAgICAgICAgICAgIHBvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHBvcHVwID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBwb3B1cC5jbGFzc05hbWUgPSAnc2V0dGluZ3MtcG9wdXAnO1xuXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc2V0dGluZ0l0ZW0uY2xhc3NOYW1lID0gJ3NldHRpbmdzLWl0ZW0nO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgbGVmdCBpY29uIChmb2xkZXIvZmlsZSBpY29uKVxuICAgICAgICAgICAgY29uc3QgbGVmdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGxlZnRJY29uLmNsYXNzTmFtZSA9ICdzZXR0aW5nLWl0ZW0taWNvbic7XG4gICAgICAgICAgICBsZWZ0SWNvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMyAzaDE4djE4SDN6XCI+PC9wYXRoPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTMgOWgxOFwiPjwvcGF0aD5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIGA7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBsYWJlbFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9ICdGdWxsIHBhdGggbm90ZSB0aXRsZSc7XG4gICAgICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSAnc2V0dGluZy1pdGVtLWxhYmVsJztcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNoZWNrbWFyayBjb250YWluZXIgKHJpZ2h0IHNpZGUpXG4gICAgICAgICAgICBjb25zdCBjaGVja21hcmtDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNoZWNrbWFya0NvbnRhaW5lci5jbGFzc05hbWUgPSAnY2hlY2ttYXJrLWNvbnRhaW5lcic7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBjaGVja21hcmsgaWNvblxuICAgICAgICAgICAgY29uc3QgY2hlY2ttYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjaGVja21hcmsuY2xhc3NOYW1lID0gJ2NoZWNrbWFyayc7XG4gICAgICAgICAgICBjaGVja21hcmsuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPlxuICAgICAgICAgICAgICAgICAgICA8cG9seWxpbmUgcG9pbnRzPVwiMjAgNiA5IDE3IDQgMTJcIj48L3BvbHlsaW5lPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIGNoZWNrbWFyay5zdHlsZS5kaXNwbGF5ID0gY3VycmVudEZ1bGxQYXRoU3RhdGUgPyAnYmxvY2snIDogJ25vbmUnO1xuXG4gICAgICAgICAgICBjaGVja21hcmtDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2ttYXJrKTtcbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFwcGVuZENoaWxkKGxlZnRJY29uKTtcbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIHNldHRpbmdJdGVtLmFwcGVuZENoaWxkKGNoZWNrbWFya0NvbnRhaW5lcik7XG4gICAgICAgICAgICBwb3B1cC5hcHBlbmRDaGlsZChzZXR0aW5nSXRlbSk7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgdGhlIGVudGlyZSBzZXR0aW5nIGl0ZW0gY2xpY2thYmxlXG4gICAgICAgICAgICBzZXR0aW5nSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RnVsbFBhdGhTdGF0ZSA9ICFjdXJyZW50RnVsbFBhdGhTdGF0ZTtcbiAgICAgICAgICAgICAgICBjaGVja21hcmsuc3R5bGUuZGlzcGxheSA9IGN1cnJlbnRGdWxsUGF0aFN0YXRlID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICAgICAgICBvbkZ1bGxQYXRoVGl0bGVDaGFuZ2UoY3VycmVudEZ1bGxQYXRoU3RhdGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogVGhlIGFjdHVhbCB0aXRsZSB0cmFuc2Zvcm1hdGlvbiBzaG91bGQgaGFwcGVuIGluIHRoZSBwYXJlbnQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgLy8gdGhhdCByZWNlaXZlcyB0aGUgb25GdWxsUGF0aFRpdGxlQ2hhbmdlIGV2ZW50LiBUaGlzIGNvbXBvbmVudCBvbmx5XG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlcyB0aGUgVUkgdG9nZ2xlIHN0YXRlLlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFBvc2l0aW9uIHRoZSBwb3B1cFxuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNldHRpbmdzQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgcG9wdXAuc3R5bGUudG9wID0gYCR7cmVjdC5ib3R0b20gKyA1fXB4YDtcbiAgICAgICAgICAgIHBvcHVwLnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnR9cHhgO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBvcHVwKTtcblxuICAgICAgICAgICAgLy8gQ2xvc2UgcG9wdXAgd2hlbiBjbGlja2luZyBvdXRzaWRlXG4gICAgICAgICAgICBjb25zdCBjbG9zZVBvcHVwID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocG9wdXAgJiYgIXBvcHVwLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpICYmIGUudGFyZ2V0ICE9PSBzZXR0aW5nc0J1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlUG9wdXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBpdGVtcyB0byBsZWZ0IGNvbnRhaW5lclxuICAgICAgICBsZWZ0Q29udGFpbmVyLmFwcGVuZENoaWxkKHN2Zyk7XG4gICAgICAgIGxlZnRDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICBsZWZ0Q29udGFpbmVyLmFwcGVuZENoaWxkKHNvcnRCdXR0b24pO1xuICAgICAgICBsZWZ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbGxhcHNlQnV0dG9uKTtcbiAgICAgICAgbGVmdENvbnRhaW5lci5hcHBlbmRDaGlsZChibG9ja0JvdW5kYXJ5U3RyYXRlZ3lTZWxlY3QpO1xuICAgICAgICBsZWZ0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoZW1lU2VsZWN0KTtcblxuICAgICAgICAvLyBBZGQgaXRlbXMgdG8gcmlnaHQgY29udGFpbmVyXG4gICAgICAgIHJpZ2h0Q29udGFpbmVyLmFwcGVuZENoaWxkKHNldHRpbmdzQnV0dG9uKTtcblxuICAgICAgICAvLyBBZGQgY29udGFpbmVycyB0byBoZWFkZXJcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGxlZnRDb250YWluZXIpO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQocmlnaHRDb250YWluZXIpO1xuXG4gICAgICAgIHJldHVybiBoZWFkZXI7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEJsb2NrQm91bmRhcnlTdHJhdGVneSB9IGZyb20gJy4vQmxvY2tCb3VuZGFyeVN0cmF0ZWd5JztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWZhdWx0QmxvY2tCb3VuZGFyeVN0cmF0ZWd5IGltcGxlbWVudHMgQmxvY2tCb3VuZGFyeVN0cmF0ZWd5IHtcclxuICAgIGZpbmRCbG9ja0JvdW5kYXJpZXMoY29udGVudDogc3RyaW5nLCBjdXJyZW50Tm90ZU5hbWU6IHN0cmluZyk6IHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfVtdIHtcclxuICAgICAgICBjb25zdCBib3VuZGFyaWVzOiB7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXFtcXFxcWyR7Y3VycmVudE5vdGVOYW1lfVxcXFxdXFxcXF1gLCAnZycpO1xyXG4gICAgICAgIGxldCBtYXRjaDtcclxuXHJcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVTdGFydEluZGV4ID0gY29udGVudC5sYXN0SW5kZXhPZignXFxuJywgbWF0Y2guaW5kZXgpICsgMTtcclxuICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBjb250ZW50LmluZGV4T2YoJy0tLScsIG1hdGNoLmluZGV4KTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dE1lbnRpb25JbmRleCA9IGNvbnRlbnQuaW5kZXhPZihgW1ske2N1cnJlbnROb3RlTmFtZX1dXWAsIG1hdGNoLmluZGV4ICsgMSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYmxvY2tFbmRJbmRleCA9IGNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoZW5kSW5kZXggIT09IC0xICYmIChuZXh0TWVudGlvbkluZGV4ID09PSAtMSB8fCBlbmRJbmRleCA8IG5leHRNZW50aW9uSW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICBibG9ja0VuZEluZGV4ID0gZW5kSW5kZXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV4dE1lbnRpb25JbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGJsb2NrRW5kSW5kZXggPSBuZXh0TWVudGlvbkluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib3VuZGFyaWVzLnB1c2goeyBzdGFydDogbGluZVN0YXJ0SW5kZXgsIGVuZDogYmxvY2tFbmRJbmRleCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBib3VuZGFyaWVzO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBCbG9ja0JvdW5kYXJ5U3RyYXRlZ3kgfSBmcm9tICcuL0Jsb2NrQm91bmRhcnlTdHJhdGVneSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2luZ2xlTGluZUJsb2NrQm91bmRhcnlTdHJhdGVneSBpbXBsZW1lbnRzIEJsb2NrQm91bmRhcnlTdHJhdGVneSB7XHJcbiAgICBmaW5kQmxvY2tCb3VuZGFyaWVzKGNvbnRlbnQ6IHN0cmluZywgY3VycmVudE5vdGVOYW1lOiBzdHJpbmcpOiB7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH1bXSB7XHJcbiAgICAgICAgY29uc3QgYm91bmRhcmllczogeyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cclxuICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaXJzdExpbmUgPSBsaW5lc1swXTtcclxuICAgICAgICAgICAgYm91bmRhcmllcy5wdXNoKHsgc3RhcnQ6IDAsIGVuZDogZmlyc3RMaW5lLmxlbmd0aCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBib3VuZGFyaWVzO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vU2V0dGluZ3NNYW5hZ2VyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb2FsZXNjZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGFwcDogQXBwLFxyXG4gICAgICAgIHByaXZhdGUgcGx1Z2luOiBhbnksXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlclxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1Nob3cgaW4gRGFpbHkgTm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIENvYWxlc2NlIHZpZXcgaW4gZGFpbHkgbm90ZXMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzTWFuYWdlci5zZXR0aW5ncy5zaG93SW5EYWlseU5vdGVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnNldHRpbmdzLnNob3dJbkRhaWx5Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQW1DOzs7QUNVbkMsSUFBTSxtQkFBMkM7QUFBQSxFQUM3QyxXQUFXO0FBQUEsRUFDWCxnQkFBZ0I7QUFBQSxFQUNoQixpQkFBaUI7QUFBQSxFQUNqQixrQkFBa0I7QUFBQSxFQUNsQix1QkFBdUI7QUFBQSxFQUN2QixPQUFPO0FBQUEsRUFDUCxtQkFBbUI7QUFDdkI7QUFnQk8sSUFBTSxrQkFBTixNQUFzQjtBQUFBLEVBSXpCLFlBQVksUUFBZ0I7QUFDeEIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLE9BQU8sU0FBUyxDQUFDO0FBQUEsRUFDcEY7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssT0FBTyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQzVDO0FBQ0o7OztBQ2pEQSxJQUFBQyxtQkFBeUM7OztBQ0F6QyxJQUFBQyxtQkFBc0Q7OztBQ0F0RCxzQkFBK0M7OztB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LElBQUksVUFBVSxHQUFHLGFBQWEsQ0FBQyxTQUFnQjtBQUNuRCxVQUFJLENBQUM7QUFBTTtBQUVYLFlBQU0sVUFBVSxLQUFLLFlBQVksSUFBSTtBQUNyQyxVQUFJLENBQUMsV0FBWSxXQUFXLEtBQUssZ0JBQWdCLFNBQVMsa0JBQW1CO0FBQzVFLGFBQUssZ0JBQWdCLGVBQWUsSUFBSTtBQUFBLE1BQ3pDLE9BQU87QUFDTixhQUFLLGdCQUFnQixlQUFlO0FBQUEsTUFDckM7QUFBQSxJQUNELENBQUM7QUFRRCxJQUFDLE9BQWUsZ0JBQWdCLFdBQVc7QUFDMUMsYUFBTyxPQUFPO0FBQ2QsY0FBUSxJQUFJLGlCQUFpQjtBQUFBLElBQzlCO0FBQ0EsSUFBQyxPQUFlLGlCQUFpQixXQUFXO0FBQzNDLGFBQU8sUUFBUTtBQUNmLGNBQVEsSUFBSSxrQkFBa0I7QUFBQSxJQUMvQjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLFdBQVc7QUFDVixTQUFLLGdCQUFnQixlQUFlO0FBQUEsRUFDckM7QUFBQSxFQUVRLFlBQVksTUFBc0I7QUFFekMsVUFBTSxtQkFBb0IsS0FBSyxJQUFZLGdCQUFnQixRQUFRLGFBQWE7QUFDaEYsUUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixTQUFTO0FBQ25ELFdBQUssT0FBTyxNQUFNLG9DQUFvQztBQUN0RCxhQUFPO0FBQUEsSUFDUjtBQUdBLFVBQU0sbUJBQW1CLGlCQUFpQixTQUFTLFFBQVEsVUFBVTtBQUNyRSxRQUFJLENBQUMsa0JBQWtCO0FBQ3RCLFdBQUssT0FBTyxNQUFNLCtDQUErQztBQUFBLElBQ2xFO0FBRUEsVUFBTSxtQkFBbUI7QUFHekIsUUFBSSxDQUFDLEtBQUssS0FBSyxXQUFXLGdCQUFnQixHQUFHO0FBQzVDLGFBQU87QUFBQSxJQUNSO0FBR0EsV0FBTyxpQkFBaUIsS0FBSyxLQUFLLElBQUk7QUFBQSxFQUN2QztBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJlIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
